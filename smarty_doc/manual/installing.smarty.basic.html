<HTML
><HEAD
><TITLE
>Basic Installation</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.64
"><LINK
REL="HOME"
TITLE="Smarty - the compiling PHP template engine"
HREF="index.html"><LINK
REL="UP"
TITLE="Installation"
HREF="installation.html"><LINK
REL="PREVIOUS"
TITLE="Installation"
HREF="installation.html"><LINK
REL="NEXT"
TITLE="Extended Setup"
HREF="installing.smarty.extended.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Smarty - the compiling PHP template engine</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="installation.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 2. Installation</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="installing.smarty.extended.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="INSTALLING.SMARTY.BASIC"
>Basic Installation</A
></H1
><P
>	Install the Smarty library files which are in the /libs/ directory of
	the distribution. These are the PHP files that you SHOULD NOT edit. They
	are shared among all applications and they only get updated when you
	upgrade to a new version of Smarty.
	</P
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="EXAMPLE"
><A
NAME="AEN69"
></A
><P
><B
>Example 2-1. Smarty library files</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>Smarty.class.php
Smarty_Compiler.class.php
Config_File.class.php
debug.tpl
/plugins/*.php (all of them!)</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><P
>	Smarty uses a PHP constant named <A
HREF="smarty.constants.html#CONSTANT.SMARTY.DIR"
>SMARTY_DIR</A
> which is the system
	filepath Smarty library directory. Basically, if your application can find
	the <I
CLASS="EMPHASIS"
>Smarty.class.php</I
> file, you do not need to set
	SMARTY_DIR, Smarty will figure it out on its own. Therefore, if
	<I
CLASS="EMPHASIS"
>Smarty.class.php</I
> is not in your include_path, or you
	do not supply an absolute path to it in your application, then you must
	define SMARTY_DIR manually. SMARTY_DIR <I
CLASS="EMPHASIS"
>must</I
> include a
	trailing slash.
	</P
><P
>	Here is how you create an instance of Smarty in your PHP scripts:
	</P
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="EXAMPLE"
><A
NAME="AEN78"
></A
><P
><B
>Example 2-2. Create Smarty instance of Smarty</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>require('Smarty.class.php');
$smarty = new Smarty;</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><P
>	Try running the above script. If you get an error saying the
	<I
CLASS="EMPHASIS"
>Smarty.class.php</I
> file could not be found, you have to
	do one of the following:
	</P
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="EXAMPLE"
><A
NAME="AEN83"
></A
><P
><B
>Example 2-3. Supply absolute path to library directory</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>require('/usr/local/lib/php/Smarty/Smarty.class.php');
$smarty = new Smarty;</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="EXAMPLE"
><A
NAME="AEN86"
></A
><P
><B
>Example 2-4. Add library directory to php_include path</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>// Edit your php.ini file, add the Smarty library
// directory to the include_path and restart web server.
// Then the following should work:
require('Smarty.class.php');
$smarty = new Smarty;</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="EXAMPLE"
><A
NAME="AEN89"
></A
><P
><B
>Example 2-5. Set SMARTY_DIR constant manually</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>define('SMARTY_DIR','/usr/local/lib/php/Smarty/');
require(SMARTY_DIR.'Smarty.class.php');
$smarty = new Smarty;</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><P
>	Now that the library files are in place, it's time to setup the Smarty
	directories for your application. Smarty requires four directories which
	are (by default) named <I
CLASS="EMPHASIS"
>templates</I
>,
	<I
CLASS="EMPHASIS"
>templates_c</I
>, <I
CLASS="EMPHASIS"
>configs</I
> and
	<I
CLASS="EMPHASIS"
>cache</I
>. Each of these are definable by the Smarty class
	properties <I
CLASS="EMPHASIS"
>$template_dir</I
>,
	<I
CLASS="EMPHASIS"
>$compile_dir</I
>, <I
CLASS="EMPHASIS"
>$config_dir</I
>, and
	<I
CLASS="EMPHASIS"
>$cache_dir</I
> respectively. It is highly recommended
	that you setup a separate set of these directories for each application
	that will use Smarty.
	</P
><P
>	Be sure you know the location of your web server document root. In our
	example, the document root is "/web/www.mydomain.com/docs/". The Smarty
	directories are only accessed by the Smarty library and never accessed
	directly by the web browser. Therefore to avoid any security concerns, it
	is recommended to place these directories in a directory
	<I
CLASS="EMPHASIS"
>off</I
> the document root.
	</P
><P
>	For our installation example, we will be setting up the Smarty environment
	for a guest book application. We picked an application only for the purpose
	of a directory naming convention. You can use the same environment for any
	application, just replace "guestbook" with the name of your app. We'll
	place our Smarty directories under
	"/web/www.mydomain.com/smarty/guestbook/".
	</P
><P
>	You will need as least one file under your document root, and that is the
	script accessed by the web browser. We will call our script "index.php",
	and place it in a subdirectory under the document root called
	"/guestbook/". It is convenient to setup the web server so that "index.php"
	can be identified as the default directory index, so if you access
	"http://www.mydomain.com/guestbook/", the index.php script will be executed
	without "index.php" in the URL. In Apache you can set this up by adding
	"index.php" onto the end of your DirectoryIndex setting (separate each
	entry with a space.)
	</P
><P
>	Lets take a look at the file structure so far:
	</P
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="EXAMPLE"
><A
NAME="AEN106"
></A
><P
><B
>Example 2-6. Example file structure</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>/usr/local/lib/php/Smarty/Smarty.class.php
/usr/local/lib/php/Smarty/Smarty_Compiler.class.php
/usr/local/lib/php/Smarty/Config_File.class.php
/usr/local/lib/php/Smarty/debug.tpl
/usr/local/lib/php/Smarty/plugins/*.php

/web/www.mydomain.com/smarty/guestbook/templates/
/web/www.mydomain.com/smarty/guestbook/templates_c/
/web/www.mydomain.com/smarty/guestbook/configs/
/web/www.mydomain.com/smarty/guestbook/cache/

/web/www.mydomain.com/docs/guestbook/index.php</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><P
>	Smarty will need write access to the <I
CLASS="EMPHASIS"
>$compile_dir</I
> and
	<I
CLASS="EMPHASIS"
>$cache_dir</I
>, so be sure the web server user can write
	to them. This is usually user "nobody" and group "nobody". For OS X users,
	the default is user "web" and group "web". If you are using Apache, you can
	look in your httpd.conf file (usually in "/usr/local/apache/conf/") to see
	what user and group are being used.
	</P
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="EXAMPLE"
><A
NAME="AEN112"
></A
><P
><B
>Example 2-7. Setting file permissions</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>&#13;chown nobody:nobody /web/www.mydomain.com/smarty/templates_c/
chmod 770 /web/www.mydomain.com/smarty/templates_c/

chown nobody:nobody /web/www.mydomain.com/smarty/cache/
chmod 770 /web/www.mydomain.com/smarty/cache/</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Technical Note: </B
>	 chmod 770 will be fairly tight security, it only allows user "nobody" and
	 group "nobody" read/write access to the directories. If you would like to
	 open up read access to anyone (mostly for your own convenience of viewing
	 these files), you can use 775 instead.
     </P
></BLOCKQUOTE
></DIV
><P
>	We need to create the index.tpl file that Smarty will load. This will be
	located in your $template_dir.
	</P
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="EXAMPLE"
><A
NAME="AEN119"
></A
><P
><B
>Example 2-8. Editing /web/www.mydomain.com/smarty/templates/index.tpl</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>&#13;{* Smarty *}

Hello, {$name}!</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Technical Note: </B
>		{* Smarty *} is a template comment. It is not required, but it is good
		practice to start all your template files with this comment. It makes
		the file easy to recognize regardless of the file extension. For
		example, text editors could recognize the file and turn on special
		syntax highlighting.
	</P
></BLOCKQUOTE
></DIV
><P
>	Now lets edit index.php. We'll create an instance of Smarty, assign a
	template variable and display the index.tpl file. In our example
	environment, "/usr/local/lib/php/Smarty" is in our include_path. Be sure you
	do the same, or use absolute paths.
	</P
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="EXAMPLE"
><A
NAME="AEN126"
></A
><P
><B
>Example 2-9. Editing /web/www.mydomain.com/docs/guestbook/index.php</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>// load Smarty library
require('Smarty.class.php');

$smarty = new Smarty;

$smarty-&#62;template_dir = '/web/www.mydomain.com/smarty/guestbook/templates/';
$smarty-&#62;compile_dir = '/web/www.mydomain.com/smarty/guestbook/templates_c/';
$smarty-&#62;config_dir = '/web/www.mydomain.com/smarty/guestbook/configs/';
$smarty-&#62;cache_dir = '/web/www.mydomain.com/smarty/guestbook/cache/';

$smarty-&#62;assign('name','Ned');

$smarty-&#62;display('index.tpl');</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Technical Note: </B
>	 In our example, we are setting absolute paths to all of the Smarty
	 directories. If '/web/www.mydomain.com/smarty/guestbook/' is within your
	 PHP include_path, then these settings are not necessary. However, it is
	 more efficient and (from experience) less error-prone to set them to
	 absolute paths. This ensures that Smarty is getting files from the
	 directories you intended.
	 </P
></BLOCKQUOTE
></DIV
><P
>	Now load the index.php file from your web browser. You should see "Hello,
	Ned!"
	</P
><P
>	You have completed the basic setup for Smarty!
	</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="installation.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="installing.smarty.extended.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Installation</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="installation.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Extended Setup</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>